---
id: "6"
title: "Image Handling"
published: "false"



---

[Prev](4.gatsby-graphql.md)	[Next](7.query-args.md)

---

# Image Handling

we can add images to the `src/images/` directory

> we've added 3 images
>
> <div style="display: flex;">
> 	<div>
>     <img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gakzk6mtirj30u00k07wh.jpg"/>
>   </div>
>   	<div>
>     <img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gakzly1m21j30u00jte81.jpg"/>
>   </div>
>   	<div>
>     <img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gakzmajacaj30u00kf7wh.jpg"/>
>   </div>
> </div>

> `src/pages/images.js`:
>
> ```react
> import React from 'react'
> import Layout from '../components/Layout'
> 
> export default () => {
>   return (
>     <Layout>
>       images here
>     </Layout>
>   )
> }
> ```
>
> > **NOTE:** we'll need the gatsby-source-filesystem plugin configured before we are ready to read files from our filesystem.





## [gatsby-source-filesystem](https://www.gatsbyjs.org/packages/gatsby-source-filesystem/?=sour#gatsby-source-filesystem)

> A Gatsby source plugin for sourcing data into your Gatsby application from your local filesystem.
>
> The plugin creates `File` nodes from files. The various “transformer” plugins can transform `File` nodes into various other types of data e.g. `gatsby-transformer-json` transforms JSON files into JSON data nodes and `gatsby-transformer-remark` transforms markdown files into `MarkdownRemark` nodes from which you can query an HTML representation of the markdown.
>
> ## Install
>
> ```
> yarn add gatsby-source-filesystem
> ```
>
> ## How to use
>
> `gatsby-config.js`
>
> ```js
> 	{
>       resolve: `gatsby-source-filesystem`,
>       options: {
>         name: `pages`,
>         path: `${__dirname}/src/pages/`,
>       },
>     },
>     {
>       resolve: `gatsby-source-filesystem`,
>       options: {
>         name: `data`,
>         path: `${__dirname}/src/data/`,
>         ignore: [`**/\.*`], // ignore files starting with a dot
>       },
>     },
> ```



For our purposes, we'll want to import the `images/` directory we just created:

> `gatsby-config.js`
>
> ```js
> plugins: [
>   /* ... */
>   {
>       resolve: `gatsby-source-filesystem`,
>       options: {
>         name: `images`,
>         path: `${__dirname}/src/images/`,
>       },
>     },
> ]
> ```
>
> > **NOTE:** this will tell gatsby to find images in our images folder, and that we want to call the items it finds in this folder "images". This value populates a field on our file, called `sourceInstanceName`
>
> > This allows us to define several file types that we expect to find in any number of folders throughout our filesystem. 
>
> ```js
> plugins: [
>   /* ... */
>   {
>       resolve: `gatsby-source-filesystem`,
>       options: {
>         name: `images`,
>         path: `${__dirname}/src/images/`,
>       },
>   },
>     {
>       resolve: `gatsby-source-filesystem`,
>       options: {
>         name: `posts`,
>         path: `${__dirname}/src/posts/`,
>       },
>   },
> ]
> ```
>
> > This allows us to now reference a whole new type of files, that we can find in a totally different folder in our filesytem.

 

>   <div style="display: flex; width: 100%">
>     <span>
>       <strong>
> 				query for how many images exist:
>       </strong>
>           <pre><code>
>           {
>             resolve: `gatsby-source-filesystem`,
>             options: {
>               name: `images`,
>               path: `${__dirname}/src/images/`,
>             },
>           },
>           </code></pre>
>     </span>
>     <span>
>      <strong>
>         which returns:
>       </strong>
>         <pre><code>
>         {
>           "data": {
>             "allFile": {
>               "totalCount": 3
>             }
>           }
>         }
>         </code></pre>
>     </span>
> </div>
>
> 

> **NOTE:** As we make changes to our "sourced" folder, our queries will update, if we add images, that will be reflected, if images are removed that too will be reflected.



>**Query for image url and info**
>
>```
>query Images {
>  allFile {
>    edges {
>      node {
>        id
>        absolutePath
>        extension
>        size
>      }
>    }
>  }
>}
>
>```
>
>which returns:
>
>```js
>{
>  "data": {
>    "allFile": {
>      "edges": [
>        {
>          "node": {
>            "id": "29f78ab7-4cb5-5b6d-932b-1c23d28d7d63",
>            "absolutePath": "/Users/bunty/werk/gatsby-box/gatsby-starter-hello-world/src/images/sea-stones.jpeg",
>            "extension": "jpeg",
>            "size": 122782
>          }
>        },
>        {
>          "node": {
>            "id": "a08e35b3-23de-5600-8d1c-166311762444",
>            "absolutePath": "/Users/bunty/werk/gatsby-box/gatsby-starter-hello-world/src/images/compass-map.jpeg",
>            "extension": "jpeg",
>            "size": 141994
>          }
>        },
>        {
>          "node": {
>            "id": "066fecb8-2493-5464-af6c-b9a6e8ffe76b",
>            "absolutePath": "/Users/bunty/werk/gatsby-box/gatsby-starter-hello-world/src/images/compass-vintage.jpeg",
>            "extension": "jpeg",
>            "size": 175496
>          }
>        }
>      ]
>    }
>  }
>}
>```
>
>The file system exposes tons of fields that we can query for each of our files, which are referred to as "node":
>
>![image-20200104115157191](https://tva1.sinaimg.cn/large/006tNbRwgy1gal0k36rjzj30w10u046a.jpg)



## [Install gatsby-image](https://www.gatsbyjs.org/docs/using-gatsby-image/)

> **Using Gatsby Image to Prevent Image Bloat**
>
> `gatsby-image` is a React component designed to work seamlessly with Gatsby’s GraphQL queries ([`gatsby-image` plugin README](https://www.gatsbyjs.org/packages/gatsby-image/)). It combines [Gatsby’s native image processing](https://image-processing.gatsbyjs.org/) capabilities with advanced image loading techniques to easily and completely optimize image loading for your sites. `gatsby-image` uses [gatsby-plugin-sharp](https://www.gatsbyjs.org/packages/gatsby-plugin-sharp/) to power its image transformations.
>
> ```
> Warning: gatsby-image is not a drop-in replacement for <img />. It’s optimized for fixed width/height images and images that stretch the full width of a container. Some ways you can use <img /> won’t work with gatsby-image.
> ```
>
> `gatsby-image` includes the tricks you’d expect from a modern image component. It:
>
> - uses the new [IntersectionObserver API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API) to cheaply lazy load images
> - holds an image’s position so your page doesn’t jump around as images load
> - makes it easy to add a placeholder—either a gray background or a blurry version of the image.
>
> *For more complete API information, check out the [Gatsby Image API](https://www.gatsbyjs.org/docs/gatsby-image/) docs.*





---

[Prev](4.gatsby-graphql.md)	[Next](7.query-args.md)